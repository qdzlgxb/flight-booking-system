name: æž„å»ºå’Œå‘å¸ƒDockeré•œåƒ

on:
  push:
    tags:
      - 'v*'  # å½“æŽ¨é€æ ‡ç­¾æ—¶è§¦å‘ï¼Œå¦‚ v1.0.0
  workflow_dispatch:  # å…è®¸æ‰‹åŠ¨è§¦å‘

env:
  REGISTRY: ghcr.io
  IMAGE_NAME: ${{ github.repository }}

jobs:
  build-and-release:
    runs-on: ubuntu-latest
    permissions:
      contents: write
      packages: write
    
    steps:
    - name: æ£€å‡ºä»£ç 
      uses: actions/checkout@v4
      
    - name: è®¾ç½®Docker Buildx
      uses: docker/setup-buildx-action@v3
      
    - name: ç™»å½•åˆ°Container Registry
      uses: docker/login-action@v3
      with:
        registry: ${{ env.REGISTRY }}
        username: ${{ github.actor }}
        password: ${{ secrets.GITHUB_TOKEN }}
        
    - name: æå–å…ƒæ•°æ®
      id: meta
      uses: docker/metadata-action@v5
      with:
        images: ${{ env.REGISTRY }}/${{ env.IMAGE_NAME }}
        tags: |
          type=ref,event=tag
          type=ref,event=branch
          type=sha,prefix={{branch}}-
          type=raw,value=latest,enable={{is_default_branch}}
          
    - name: æž„å»ºå’ŒæŽ¨é€Dockeré•œåƒ
      uses: docker/build-push-action@v5
      with:
        context: .
        platforms: linux/amd64,linux/arm64
        push: true
        tags: ${{ steps.meta.outputs.tags }}
        labels: ${{ steps.meta.outputs.labels }}
        cache-from: type=gha
        cache-to: type=gha,mode=max
        
    # æ–°å¢žï¼šæž„å»ºç”¨äºŽå¯¼å‡ºçš„ Docker é•œåƒï¼ˆä»… amd64 æž¶æž„ï¼Œå› ä¸ºéœ€è¦å¯¼å‡ºä¸º tarï¼‰
    - name: æž„å»ºç”¨äºŽå¯¼å‡ºçš„Dockeré•œåƒ
      uses: docker/build-push-action@v5
      with:
        context: .
        platforms: linux/amd64
        push: false
        load: true
        tags: flight-booking-system:${{ github.ref_name }}
        cache-from: type=gha
        
    # æ–°å¢žï¼šå¯¼å‡º Docker é•œåƒä¸º tar æ–‡ä»¶
    - name: å¯¼å‡ºDockeré•œåƒä¸ºtaræ–‡ä»¶
      run: |
        # åˆ›å»ºå¯¼å‡ºç›®å½•
        mkdir -p docker-images
        
        # å¯¼å‡ºé•œåƒä¸º tar æ–‡ä»¶
        docker save flight-booking-system:${{ github.ref_name }} | gzip > docker-images/flight-booking-system-${{ github.ref_name }}-amd64.tar.gz
        
        # éªŒè¯æ–‡ä»¶åˆ›å»ºæˆåŠŸ
        ls -lh docker-images/
        
        # è®¡ç®—æ–‡ä»¶æ ¡éªŒå’Œ
        cd docker-images
        sha256sum flight-booking-system-${{ github.ref_name }}-amd64.tar.gz > flight-booking-system-${{ github.ref_name }}-amd64.tar.gz.sha256
        cat flight-booking-system-${{ github.ref_name }}-amd64.tar.gz.sha256
        
    # æ–°å¢žï¼šåˆ›å»ºéƒ¨ç½²è„šæœ¬
    - name: åˆ›å»ºéƒ¨ç½²è„šæœ¬
      run: |
        cat > docker-images/deploy.sh << 'EOF'
        #!/bin/bash
        
        # èˆªç­è´­ç¥¨ç³»ç»Ÿ Docker é•œåƒéƒ¨ç½²è„šæœ¬
        # ä½¿ç”¨æ–¹æ³•: ./deploy.sh [é•œåƒtaræ–‡ä»¶è·¯å¾„]
        
        set -e
        
        IMAGE_TAR="${1:-flight-booking-system-${{ github.ref_name }}-amd64.tar.gz}"
        IMAGE_NAME="flight-booking-system:${{ github.ref_name }}"
        CONTAINER_NAME="flight-booking-system"
        
        echo "=== èˆªç­è´­ç¥¨ç³»ç»Ÿéƒ¨ç½²è„šæœ¬ ==="
        echo "ç‰ˆæœ¬: ${{ github.ref_name }}"
        echo "é•œåƒæ–‡ä»¶: $IMAGE_TAR"
        echo ""
        
        # æ£€æŸ¥é•œåƒæ–‡ä»¶æ˜¯å¦å­˜åœ¨
        if [ ! -f "$IMAGE_TAR" ]; then
            echo "âŒ é”™è¯¯: é•œåƒæ–‡ä»¶ $IMAGE_TAR ä¸å­˜åœ¨"
            exit 1
        fi
        
        # éªŒè¯æ–‡ä»¶å®Œæ•´æ€§ï¼ˆå¦‚æžœå­˜åœ¨ sha256 æ–‡ä»¶ï¼‰
        if [ -f "$IMAGE_TAR.sha256" ]; then
            echo "ðŸ” éªŒè¯æ–‡ä»¶å®Œæ•´æ€§..."
            if sha256sum -c "$IMAGE_TAR.sha256"; then
                echo "âœ… æ–‡ä»¶å®Œæ•´æ€§éªŒè¯é€šè¿‡"
            else
                echo "âŒ æ–‡ä»¶å®Œæ•´æ€§éªŒè¯å¤±è´¥"
                exit 1
            fi
        fi
        
        # åœæ­¢å¹¶åˆ é™¤æ—§å®¹å™¨ï¼ˆå¦‚æžœå­˜åœ¨ï¼‰
        if docker ps -a --format 'table {{.Names}}' | grep -q "^$CONTAINER_NAME$"; then
            echo "ðŸ›‘ åœæ­¢æ—§å®¹å™¨..."
            docker stop $CONTAINER_NAME || true
            echo "ðŸ—‘ï¸  åˆ é™¤æ—§å®¹å™¨..."
            docker rm $CONTAINER_NAME || true
        fi
        
        # åˆ é™¤æ—§é•œåƒï¼ˆå¦‚æžœå­˜åœ¨ï¼‰
        if docker images --format 'table {{.Repository}}:{{.Tag}}' | grep -q "^$IMAGE_NAME$"; then
            echo "ðŸ—‘ï¸  åˆ é™¤æ—§é•œåƒ..."
            docker rmi $IMAGE_NAME || true
        fi
        
        # åŠ è½½æ–°é•œåƒ
        echo "ðŸ“¦ åŠ è½½ Docker é•œåƒ..."
        if [[ "$IMAGE_TAR" == *.gz ]]; then
            gunzip -c "$IMAGE_TAR" | docker load
        else
            docker load < "$IMAGE_TAR"
        fi
        
        # å¯åŠ¨å®¹å™¨
        echo "ðŸš€ å¯åŠ¨åº”ç”¨å®¹å™¨..."
        docker run -d \
            --name $CONTAINER_NAME \
            --restart unless-stopped \
            -p 8080:8080 \
            $IMAGE_NAME
        
        echo ""
        echo "âœ… éƒ¨ç½²å®Œæˆï¼"
        echo "ðŸŒ åº”ç”¨è®¿é—®åœ°å€: http://localhost:8080"
        echo "ðŸ“Š æŸ¥çœ‹å®¹å™¨çŠ¶æ€: docker ps"
        echo "ðŸ“‹ æŸ¥çœ‹åº”ç”¨æ—¥å¿—: docker logs $CONTAINER_NAME"
        echo ""
        echo "ðŸ“ è‡ªå®šä¹‰æ•°æ®åº“é…ç½®ç¤ºä¾‹:"
        echo "docker run -d \\"
        echo "  --name $CONTAINER_NAME \\"
        echo "  --restart unless-stopped \\"
        echo "  -p 8080:8080 \\"
        echo "  -e DB_URL=jdbc:mysql://your-db:3306/your_database \\"
        echo "  -e DB_USERNAME=your_username \\"
        echo "  -e DB_PASSWORD=your_password \\"
        echo "  -e JWT_SECRET=your_jwt_secret_key \\"
        echo "  $IMAGE_NAME"
        EOF
        
        chmod +x docker-images/deploy.sh
        
    # æ–°å¢žï¼šåˆ›å»ºç¦»çº¿éƒ¨ç½²è¯´æ˜Žæ–‡æ¡£
    - name: åˆ›å»ºç¦»çº¿éƒ¨ç½²è¯´æ˜Ž
      run: |
        cat > docker-images/README.md << 'EOF'
        # èˆªç­è´­ç¥¨ç³»ç»Ÿ - ç¦»çº¿éƒ¨ç½²åŒ…
        
        ç‰ˆæœ¬: ${{ github.ref_name }}
        æž„å»ºæ—¶é—´: $(date)
        
        ## ðŸ“¦ åŒ…å«æ–‡ä»¶
        
        - `flight-booking-system-${{ github.ref_name }}-amd64.tar.gz` - Docker é•œåƒæ–‡ä»¶
        - `flight-booking-system-${{ github.ref_name }}-amd64.tar.gz.sha256` - æ–‡ä»¶æ ¡éªŒå’Œ
        - `deploy.sh` - è‡ªåŠ¨éƒ¨ç½²è„šæœ¬
        - `README.md` - æœ¬è¯´æ˜Žæ–‡æ¡£
        
        ## ðŸš€ å¿«é€Ÿéƒ¨ç½²
        
        ### æ–¹æ³•ä¸€ï¼šä½¿ç”¨è‡ªåŠ¨éƒ¨ç½²è„šæœ¬ï¼ˆæŽ¨èï¼‰
        
        ```bash
        # ç»™è„šæœ¬æ‰§è¡Œæƒé™
        chmod +x deploy.sh
        
        # è¿è¡Œéƒ¨ç½²è„šæœ¬
        ./deploy.sh
        ```
        
        ### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨éƒ¨ç½²
        
        ```bash
        # 1. åŠ è½½ Docker é•œåƒ
        gunzip -c flight-booking-system-${{ github.ref_name }}-amd64.tar.gz | docker load
        
        # 2. è¿è¡Œå®¹å™¨
        docker run -d \
          --name flight-booking-system \
          --restart unless-stopped \
          -p 8080:8080 \
          flight-booking-system:${{ github.ref_name }}
        
        # 3. è®¿é—®åº”ç”¨
        # æµè§ˆå™¨æ‰“å¼€: http://localhost:8080
        ```
        
        ## âš™ï¸ è‡ªå®šä¹‰é…ç½®
        
        ### æ•°æ®åº“é…ç½®
        
        å¦‚æžœéœ€è¦è¿žæŽ¥å¤–éƒ¨ MySQL æ•°æ®åº“ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š
        
        ```bash
        docker run -d \
          --name flight-booking-system \
          --restart unless-stopped \
          -p 8080:8080 \
          -e DB_URL=jdbc:mysql://your-db-host:3306/your_database \
          -e DB_USERNAME=your_username \
          -e DB_PASSWORD=your_password \
          -e JWT_SECRET=your_jwt_secret_key \
          flight-booking-system:${{ github.ref_name }}
        ```
        
        ### çŽ¯å¢ƒå˜é‡è¯´æ˜Ž
        
        | å˜é‡å | é»˜è®¤å€¼ | è¯´æ˜Ž |
        |--------|--------|------|
        | `DB_URL` | `jdbc:h2:mem:testdb` | æ•°æ®åº“è¿žæŽ¥URL |
        | `DB_USERNAME` | `sa` | æ•°æ®åº“ç”¨æˆ·å |
        | `DB_PASSWORD` | `` | æ•°æ®åº“å¯†ç  |
        | `JWT_SECRET` | `mySecretKey` | JWT ç­¾åå¯†é’¥ |
        | `SERVER_PORT` | `8080` | åº”ç”¨ç«¯å£ |
        
        ## ðŸ”§ å¸¸ç”¨å‘½ä»¤
        
        ```bash
        # æŸ¥çœ‹å®¹å™¨çŠ¶æ€
        docker ps
        
        # æŸ¥çœ‹åº”ç”¨æ—¥å¿—
        docker logs flight-booking-system
        
        # è¿›å…¥å®¹å™¨
        docker exec -it flight-booking-system sh
        
        # åœæ­¢å®¹å™¨
        docker stop flight-booking-system
        
        # åˆ é™¤å®¹å™¨
        docker rm flight-booking-system
        
        # åˆ é™¤é•œåƒ
        docker rmi flight-booking-system:${{ github.ref_name }}
        ```
        
        ## ðŸ“‹ ç³»ç»Ÿè¦æ±‚
        
        - Docker ç‰ˆæœ¬ 20.10 æˆ–æ›´é«˜
        - ç³»ç»Ÿæž¶æž„: linux/amd64
        - å¯ç”¨å†…å­˜: è‡³å°‘ 512MB
        - å¯ç”¨å­˜å‚¨: è‡³å°‘ 1GB
        
        ## ðŸ†˜ æ•…éšœæŽ’é™¤
        
        ### ç«¯å£å†²çª
        å¦‚æžœ 8080 ç«¯å£è¢«å ç”¨ï¼Œå¯ä»¥æ›´æ¢ç«¯å£ï¼š
        ```bash
        docker run -d --name flight-booking-system -p 9080:8080 flight-booking-system:${{ github.ref_name }}
        ```
        
        ### å®¹å™¨å¯åŠ¨å¤±è´¥
        æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼š
        ```bash
        docker logs flight-booking-system
        ```
        
        ### æ•°æ®åº“è¿žæŽ¥é—®é¢˜
        1. ç¡®è®¤æ•°æ®åº“æœåŠ¡æ­£åœ¨è¿è¡Œ
        2. æ£€æŸ¥ç½‘ç»œè¿žæŽ¥
        3. éªŒè¯æ•°æ®åº“ç”¨æˆ·åå’Œå¯†ç 
        4. ç¡®è®¤æ•°æ®åº“å·²åˆ›å»º
        
        ## ðŸ“ž æŠ€æœ¯æ”¯æŒ
        
        å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æŸ¥çœ‹é¡¹ç›®æ–‡æ¡£æˆ–æäº¤ Issueã€‚
        EOF
        
    - name: ç”Ÿæˆå‘å¸ƒè¯´æ˜Ž
      id: release_notes
      run: |
        echo "release_body<<EOF" >> $GITHUB_OUTPUT
        echo "## ðŸš€ èˆªç­è´­ç¥¨ç³»ç»Ÿ - ç‰ˆæœ¬ ${{ github.ref_name }}" >> $GITHUB_OUTPUT
        echo "" >> $GITHUB_OUTPUT
        echo "### ðŸ“¦ åœ¨çº¿ Docker é•œåƒ" >> $GITHUB_OUTPUT
        echo "- é•œåƒåœ°å€: \`${{ env.REGISTRY }}/${{ env.IMAGE_NAME }}:${{ github.ref_name }}\`" >> $GITHUB_OUTPUT
        echo "- æ”¯æŒæž¶æž„: linux/amd64, linux/arm64" >> $GITHUB_OUTPUT
        echo "" >> $GITHUB_OUTPUT
        echo "### ðŸ’¾ ç¦»çº¿éƒ¨ç½²åŒ…" >> $GITHUB_OUTPUT
        echo "æœ¬æ¬¡å‘å¸ƒåŒ…å«ç¦»çº¿éƒ¨ç½²åŒ…ï¼Œé€‚ç”¨äºŽæ— äº’è”ç½‘è¿žæŽ¥çš„æœåŠ¡å™¨ï¼š" >> $GITHUB_OUTPUT
        echo "" >> $GITHUB_OUTPUT
        echo "- **flight-booking-system-${{ github.ref_name }}-amd64.tar.gz** - Docker é•œåƒæ–‡ä»¶ (linux/amd64)" >> $GITHUB_OUTPUT
        echo "- **flight-booking-system-${{ github.ref_name }}-amd64.tar.gz.sha256** - æ–‡ä»¶æ ¡éªŒå’Œ" >> $GITHUB_OUTPUT
        echo "- **deploy.sh** - è‡ªåŠ¨éƒ¨ç½²è„šæœ¬" >> $GITHUB_OUTPUT
        echo "- **README.md** - ç¦»çº¿éƒ¨ç½²è¯´æ˜Žæ–‡æ¡£" >> $GITHUB_OUTPUT
        echo "" >> $GITHUB_OUTPUT
        echo "### ðŸš€ ç¦»çº¿å¿«é€Ÿéƒ¨ç½²" >> $GITHUB_OUTPUT
        echo "\`\`\`bash" >> $GITHUB_OUTPUT
        echo "# 1. ä¸‹è½½æ‰€æœ‰æ–‡ä»¶åˆ°ç›®æ ‡æœåŠ¡å™¨" >> $GITHUB_OUTPUT
        echo "# 2. ç»™éƒ¨ç½²è„šæœ¬æ‰§è¡Œæƒé™" >> $GITHUB_OUTPUT
        echo "chmod +x deploy.sh" >> $GITHUB_OUTPUT
        echo "" >> $GITHUB_OUTPUT
        echo "# 3. è¿è¡Œéƒ¨ç½²è„šæœ¬" >> $GITHUB_OUTPUT
        echo "./deploy.sh" >> $GITHUB_OUTPUT
        echo "" >> $GITHUB_OUTPUT
        echo "# 4. è®¿é—®åº”ç”¨" >> $GITHUB_OUTPUT
        echo "# æµè§ˆå™¨æ‰“å¼€: http://localhost:8080" >> $GITHUB_OUTPUT
        echo "\`\`\`" >> $GITHUB_OUTPUT
        echo "" >> $GITHUB_OUTPUT
        echo "### ðŸ³ åœ¨çº¿å¿«é€Ÿéƒ¨ç½²" >> $GITHUB_OUTPUT
        echo "\`\`\`bash" >> $GITHUB_OUTPUT
        echo "# æ‹‰å–é•œåƒ" >> $GITHUB_OUTPUT
        echo "docker pull ${{ env.REGISTRY }}/${{ env.IMAGE_NAME }}:${{ github.ref_name }}" >> $GITHUB_OUTPUT
        echo "" >> $GITHUB_OUTPUT
        echo "# è¿è¡Œå®¹å™¨ï¼ˆä½¿ç”¨é»˜è®¤é…ç½®ï¼‰" >> $GITHUB_OUTPUT
        echo "docker run -d \\" >> $GITHUB_OUTPUT
        echo "  --name flight-booking-system \\" >> $GITHUB_OUTPUT
        echo "  --restart unless-stopped \\" >> $GITHUB_OUTPUT
        echo "  -p 8080:8080 \\" >> $GITHUB_OUTPUT
        echo "  ${{ env.REGISTRY }}/${{ env.IMAGE_NAME }}:${{ github.ref_name }}" >> $GITHUB_OUTPUT
        echo "\`\`\`" >> $GITHUB_OUTPUT
        echo "" >> $GITHUB_OUTPUT
        echo "### ðŸ“‹ åŠŸèƒ½ç‰¹æ€§" >> $GITHUB_OUTPUT
        echo "- âœˆï¸ èˆªç­ä¿¡æ¯æŸ¥è¯¢å’Œé¢„è®¢" >> $GITHUB_OUTPUT
        echo "- ðŸ‘¤ ç”¨æˆ·è®¤è¯å’Œæƒé™ç®¡ç†" >> $GITHUB_OUTPUT
        echo "- ðŸŽ¨ çŽ°ä»£åŒ–çš„å‰ç«¯ç•Œé¢" >> $GITHUB_OUTPUT
        echo "- ðŸ›¡ï¸ å®‰å…¨çš„åŽç«¯APIæŽ¥å£" >> $GITHUB_OUTPUT
        echo "- ðŸ“¦ æ”¯æŒåœ¨çº¿å’Œç¦»çº¿éƒ¨ç½²" >> $GITHUB_OUTPUT
        echo "" >> $GITHUB_OUTPUT
        echo "### ðŸ”§ æŠ€æœ¯æ ˆ" >> $GITHUB_OUTPUT
        echo "- **å‰ç«¯**: React + TypeScript + Vite" >> $GITHUB_OUTPUT
        echo "- **åŽç«¯**: Spring Boot + Spring Security + JPA" >> $GITHUB_OUTPUT
        echo "- **æ•°æ®åº“**: MySQL" >> $GITHUB_OUTPUT
        echo "- **å®¹å™¨**: Spring Boot å†…åµŒ Tomcat + OpenJDK 17" >> $GITHUB_OUTPUT
        echo "EOF" >> $GITHUB_OUTPUT
        
    - name: åˆ›å»ºRelease
      id: create_release
      uses: actions/create-release@v1
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      with:
        tag_name: ${{ github.ref_name }}
        release_name: èˆªç­è´­ç¥¨ç³»ç»Ÿ ${{ github.ref_name }}
        body: ${{ steps.release_notes.outputs.release_body }}
        draft: false
        prerelease: false
        
    # æ–°å¢žï¼šä¸Šä¼ ç¦»çº¿éƒ¨ç½²æ–‡ä»¶åˆ° Release
    - name: ä¸Šä¼ Dockeré•œåƒtaræ–‡ä»¶
      uses: actions/upload-release-asset@v1
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      with:
        upload_url: ${{ steps.create_release.outputs.upload_url }}
        asset_path: ./docker-images/flight-booking-system-${{ github.ref_name }}-amd64.tar.gz
        asset_name: flight-booking-system-${{ github.ref_name }}-amd64.tar.gz
        asset_content_type: application/gzip
        
    - name: ä¸Šä¼ æ ¡éªŒå’Œæ–‡ä»¶
      uses: actions/upload-release-asset@v1
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      with:
        upload_url: ${{ steps.create_release.outputs.upload_url }}
        asset_path: ./docker-images/flight-booking-system-${{ github.ref_name }}-amd64.tar.gz.sha256
        asset_name: flight-booking-system-${{ github.ref_name }}-amd64.tar.gz.sha256
        asset_content_type: text/plain
        
    - name: ä¸Šä¼ éƒ¨ç½²è„šæœ¬
      uses: actions/upload-release-asset@v1
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      with:
        upload_url: ${{ steps.create_release.outputs.upload_url }}
        asset_path: ./docker-images/deploy.sh
        asset_name: deploy.sh
        asset_content_type: text/plain
        
    - name: ä¸Šä¼ ç¦»çº¿éƒ¨ç½²è¯´æ˜Ž
      uses: actions/upload-release-asset@v1
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      with:
        upload_url: ${{ steps.create_release.outputs.upload_url }}
        asset_path: ./docker-images/README.md
        asset_name: README.md
        asset_content_type: text/markdown
        
    - name: æž„å»ºæ‘˜è¦
      run: |
        echo "## ðŸŽ‰ æž„å»ºå®Œæˆ!" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "### ðŸ“¦ æž„å»ºä¿¡æ¯" >> $GITHUB_STEP_SUMMARY
        echo "- **ç‰ˆæœ¬**: ${{ github.ref_name }}" >> $GITHUB_STEP_SUMMARY
        echo "- **åœ¨çº¿é•œåƒ**: ${{ env.REGISTRY }}/${{ env.IMAGE_NAME }}:${{ github.ref_name }}" >> $GITHUB_STEP_SUMMARY
        echo "- **ç¦»çº¿é•œåƒ**: flight-booking-system-${{ github.ref_name }}-amd64.tar.gz" >> $GITHUB_STEP_SUMMARY
        echo "- **æž„å»ºæ—¶é—´**: $(date)" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "### ðŸš€ åœ¨çº¿éƒ¨ç½²å‘½ä»¤" >> $GITHUB_STEP_SUMMARY
        echo "#### ä½¿ç”¨é»˜è®¤é…ç½®ï¼š" >> $GITHUB_STEP_SUMMARY
        echo "\`\`\`bash" >> $GITHUB_STEP_SUMMARY
        echo "docker run -d --name flight-booking-system --restart unless-stopped -p 8080:8080 ${{ env.REGISTRY }}/${{ env.IMAGE_NAME }}:${{ github.ref_name }}" >> $GITHUB_STEP_SUMMARY
        echo "\`\`\`" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "### ðŸ’¾ ç¦»çº¿éƒ¨ç½²è¯´æ˜Ž" >> $GITHUB_STEP_SUMMARY
        echo "1. ä»Ž Release é¡µé¢ä¸‹è½½ä»¥ä¸‹æ–‡ä»¶ï¼š" >> $GITHUB_STEP_SUMMARY
        echo "   - flight-booking-system-${{ github.ref_name }}-amd64.tar.gz" >> $GITHUB_STEP_SUMMARY
        echo "   - flight-booking-system-${{ github.ref_name }}-amd64.tar.gz.sha256" >> $GITHUB_STEP_SUMMARY
        echo "   - deploy.sh" >> $GITHUB_STEP_SUMMARY
        echo "   - README.md" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "2. åœ¨ç›®æ ‡æœåŠ¡å™¨ä¸Šè¿è¡Œï¼š" >> $GITHUB_STEP_SUMMARY
        echo "\`\`\`bash" >> $GITHUB_STEP_SUMMARY
        echo "chmod +x deploy.sh && ./deploy.sh" >> $GITHUB_STEP_SUMMARY
        echo "\`\`\`" >> $GITHUB_STEP_SUMMARY 
